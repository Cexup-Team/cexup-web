import{_ as G}from"./Button-7638a4ec.mjs";import{_ as H,d as K,a as X,b as Z,c as $,x as S,a3 as tt,au as et,A as st,o as ot,s as at,e as c,f as m,g as w,w as j,aM as nt,h as it,i as t,t as a,av as g,aw as x,F as N,D as L,j as f,L as P,y as lt,k as rt,J as ct,aF as dt,aN as mt,aO as _t,aP as V,aQ as ht,q as pt}from"./entry-53aace6f.mjs";import{_ as ut}from"./SelectDate-d7d1f4a6.mjs";import{_ as ft}from"./BottomSheet-c213e1f0.mjs";import{g as wt}from"./statusOrder-ef5ab14d.mjs";import{i as gt}from"./currencyFormat-c478cab6.mjs";import{N as xt}from"./NavBar-f91e6303.mjs";const bt=K({setup(I,{expose:i}){i();const _=X(),e=Z(),v=$(),b=rt(),y=new Map,D=S(null),k=S(null),n=tt(),l=et(),s=new Date,d=s.getDate(),U=history.state.back;let T=S(!1),h=S(!1),z,A=2e3;const M=st({isLoading:!1,isStatus:"idle",isError:!1,isData:null}),B=o=>{T.value=o},E=o=>{console.log(o)},J=o=>{T.value=!0},C=o=>{document.querySelector.bind(document)("#sheet").setAttribute("aria-hidden",String(!o))},O=()=>{C(!1),B(!1)},Y=o=>{M.selected=o,O()},q=()=>{h.value=!h.value},W=async o=>{if(o==="waiting_payment")return window.open(n.stateShow.isData.payment_url,"_blank");if(o==="reschedule_from_doctor")return h.value=!h.value;(o==="join_now"||o==="on_air")&&n.joinRoom({transaction_id:n.stateShow.isData.transaction_id,type:"patient"}).then(async r=>{const p=await JSON.parse(ct(b.getItem("cexup-user"))),u={id:n.stateShow.isData.transaction_id,name:n.stateShow.isData.patient_account.name,email:p.email};await b.setItem("cexup-meet",JSON.stringify(u)),e.push("/meet")}).catch(r=>{console.log(r),_.show({type:"danger",message:"Something went wrong",timeout:4})})};ot(async()=>{l.state.allDay=l.getAllDaysInMonth(s.getFullYear(),s.getMonth()).slice(d-1,d+30),await n.showOrder(v.params.transaction_id),await l.getDoctorTele(n.stateShow.isData.doctor_account.slug),n.stateShow.isData.status==="reschedule_from_doctor"&&(h.value=!0)}),at(()=>l.stateTime.isData,o=>{l.stateTime.slcTime=null,setTimeout(()=>{let r=document.getElementsByClassName("card-select-time")[0],p=document.getElementsByClassName("card-select-time-item");for(let u=0;u<p.length;u++)p[u].addEventListener("click",function(Q){var F;l.stateTime.slcTime=Q.target.getAttribute("slcTime"),(F=r.getElementsByClassName("active")[0])==null||F.classList.remove("active"),p[u].classList.add("active")})},500)});const R={$toast:_,router:e,route:v,session:b,listMap:y,cardTime:D,cardSelectTime:k,order:n,tele:l,now:s,day:d,backstack:U,openModal:T,modalRe:h,typingTimer:z,doneTypingInterval:A,state:M,changeOpen:B,changeSelect:E,slcValue:J,setIsSheetShow:C,setOverlay:O,selectOption:Y,closeModalRe:q,actionStatus:W,submitRe:()=>{try{const o={transaction_id:n.stateShow.isData.transaction_id,type:"reschedule_patient",date:l.stateSlcDate.slc,time:l.stateTime.isData[l.stateTime.slcTime].time};n.reschedule(o).then(r=>e.go(0)).catch(r=>_.show({type:"danger",message:r.message,timeout:4}))}catch{_.show({type:"danger",message:"Please choose time",timeout:4})}},accept:()=>{const o={transaction_id:n.stateShow.isData.transaction_id,type:"accept"};n.reschedule(o).then(r=>e.go(0)).catch(r=>_.show({type:"danger",message:r.message,timeout:4}))},getDateFormatBooking:nt,getStatus:wt,idrFormat:gt,NavBar:xt};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),yt={class:"detail-order-wrapper relative"},St={key:0,class:"pt-20 px-4"},vt={class:""},Dt=t("h2",{class:"font-poppins font-semibold text-sm"},"Doctor Information",-1),kt={class:"card-register-doctor bg-white rounded-xl mt-3"},Tt={class:"flex items-start p-4"},jt={class:"w-20 h-20 rounded-full overflow-hidden mr-5"},Mt=["src"],Bt={class:"flex flex-col"},Ct={class:"font-poppins font-medium text-base"},Ot={class:"font-poppins text-xs text-gray-350"},Rt={class:"font-poppins text-xs text-gray-350 mt-2"},Ft=t("div",{class:"flex items-center mt-1"},[t("img",{src:dt,class:"w-3 h-3 mr-2",alt:""}),t("span",{class:"text-xs font-poppins"},"5 Years")],-1),Nt={class:"font-poppins text-xs mt-3"},Lt=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Order Information",-1),Pt={class:"flex items-center mt-4 w-full"},Vt=t("img",{src:mt,class:"w-9 h-9 mr-3",alt:""},null,-1),It={class:"flex flex-col w-full"},Ut=t("h4",{class:"font-poppins text-xs text-gray-350"},"Order ID",-1),zt={class:"flex justify-between items-center"},At={class:"font-poppins text-sm font-medium text-primary-color mt-1"},Et=t("img",{src:_t,class:"w-3 h-4 mr-4",alt:""},null,-1),Jt={class:"flex items-center mt-3 w-full"},Yt=t("img",{src:V,class:"w-9 h-9 mr-3",alt:""},null,-1),qt={class:"flex flex-col w-full"},Wt=t("h4",{class:"font-poppins text-xs text-gray-350"},"Status Order",-1),Qt={class:"font-poppins text-sm font-medium text-primary-color mt-1"},Gt={class:"flex items-center mt-3 w-full"},Ht=t("img",{src:V,class:"w-9 h-9 mr-3",alt:""},null,-1),Kt={class:"flex flex-col w-full"},Xt=t("h4",{class:"font-poppins text-xs text-gray-350"},"Due Date",-1),Zt={class:"font-poppins text-sm font-medium text-primary-color mt-1"},$t=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Patient Details",-1),te={class:"card-patient-detail rounded-xl px-5 py-4 mt-4"},ee={class:"flex justify-between items-center"},se={class:"flex items-center w-2/4"},oe={class:"w-12 h-12 overflow-hidden rounded-full mr-4"},ae=["src"],ne={class:"flex flex-col"},ie={class:"font-poppins font-medium text-sm"},le={class:"font-poppins text-xs text-gray-350"},re={class:"flex flex-col items-center"},ce=t("h4",{class:"font-poppins text-gray-350",style:{"font-size":"10px"}},"Simptons",-1),de={class:"text-primary-color font-medium text-sm mt-2"},me={class:"subjective"},_e=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Subjective",-1),he={class:"objective"},pe=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Objective",-1),ue={class:"assesment"},fe=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Assesment",-1),we={name:"",id:"",class:"border-2 rounded-lg h-20 p-3 mt-4 outline-none border-gray-150 w-full text-xs font-poppins overflow-scroll no-scrollbar"},ge={class:"font-poppins text-xs mt-1"},xe={class:"planning"},be=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Planning",-1),ye={class:"planning"},Se=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Non Medical Mentosa",-1),ve={class:"planning"},De=t("h2",{class:"font-poppins font-semibold text-sm mt-5"},"Procedure",-1),ke=t("h2",{class:"font-poppins font-medium text-base mt-6"},"Payment Detail",-1),Te={class:"flex justify-between items-center mt-4"},je=t("h5",{class:"font-poppins text-sm"},"Consultation",-1),Me={class:"font-poppins text-sm"},Be=t("div",{class:"flex justify-between items-center mt-2"},[t("h5",{class:"font-poppins text-sm"},"Aditional Discount"),t("span",{class:"font-poppins text-sm"},"-")],-1),Ce={class:"flex justify-between items-center mt-2"},Oe=t("h5",{class:"font-poppins text-sm font-semibold"},"Total",-1),Re={class:"font-poppins text-sm font-semibold"},Fe={class:"floating-pay-now fixed bg-white w-full z-30 bottom-0 p-6"},Ne={class:"flex flex-col justify-between items-center"},Le={class:"w-full"},Pe=t("button",{class:"text-red-650 w-full font-poppins outline-none font-medium text-sm px-10 rounded-lg bg-white"},"Cancel",-1),Ve=t("div",{class:"pt-52"},null,-1),Ie={key:1,id:"modal",class:"fixed z-30 inset-0"},Ue={class:"z-50 absolute inset-0 flex justify-center items-center px-8"},ze={class:"bg-white w-full p-4 flex justify-center items-center flex-col rounded-xl z-50"},Ae=t("div",{class:"w-28 h-28"},[t("img",{src:ht,class:"w-full h-full",alt:""})],-1),Ee=t("p",{class:"font-poppins text-sm text-gray-350"},"Doctor wants to reschedule to",-1),Je={class:"font-poppins text-base mt-1 font-semibold"},Ye={class:""},qe={class:"w-full justify-between items-center"},We=t("h3",{class:"font-poppins text-sm font-semibold"},"Schedule",-1),Qe=t("h3",{class:"font-poppins text-sm font-semibold mt-4"},"Select Time",-1),Ge={class:"select-time mt-4"},He={key:0,class:"w-full px-4 grid grid-cols-3 gap-4"},Ke=t("p",{class:"leading-relaxed h-9 animate-pulse bg-gray-400 rounded-xl"},null,-1),Xe=t("p",{class:"leading-relaxed h-9 animate-pulse bg-gray-400 rounded-xl"},null,-1),Ze=t("p",{class:"leading-relaxed h-9 animate-pulse bg-gray-400 rounded-xl"},null,-1),$e=[Ke,Xe,Ze],ts={class:"card-select-time px-4",ref:"cardTime"},es={key:0,class:"grid grid-cols-3 gap-4 w-full"},ss=["slcTime"],os=["slcTime"];function as(I,i,_,e,v,b){const y=G,D=pt,k=ut,n=ft,l=it;return c(),m("div",null,[w(l,{name:"main"},{default:j(()=>[t("div",yt,[w(e.NavBar,{title:"Detail Order",link:e.backstack},null,8,["link"]),!e.order.stateShow.isLoading&&e.order.stateShow.isStatus==="success"?(c(),m("div",St,[t("section",vt,[Dt,t("div",kt,[t("div",Tt,[t("div",jt,[t("img",{src:e.order.stateShow.isData.doctor_account.thumb,class:"object-cover",alt:""},null,8,Mt)]),t("div",Bt,[t("h3",Ct,a(e.order.stateShow.isData.doctor_account.name),1),t("p",Ot,a(e.order.stateShow.isData.doctor_account.speciality),1),t("h5",Rt,a(e.order.stateShow.isData.hospital),1),Ft,t("p",Nt,a(e.getDateFormatBooking(e.order.stateShow.isData.date)),1)])])])]),t("section",null,[Lt,t("div",Pt,[Vt,t("div",It,[Ut,t("div",zt,[t("h5",At,a(e.order.stateShow.isData.transaction_id),1),Et])])]),t("div",Jt,[Yt,t("div",qt,[Wt,t("h5",Qt,a(e.getStatus(e.order.stateShow.isData.status)),1)])]),t("div",Gt,[Ht,t("div",Kt,[Xt,t("h5",Zt,a(e.getDateFormatBooking(e.order.stateShow.isData.date,e.order.stateShow.isData.estimate)),1)])])]),t("section",null,[$t,t("div",te,[t("div",ee,[t("div",se,[t("div",oe,[t("img",{src:e.order.stateShow.isData.patient_account.thumb,class:"object-cover",alt:""},null,8,ae)]),t("div",ne,[t("h4",ie,a(e.order.stateShow.isData.patient_account.name),1),t("span",le,a(new Date(new Date-new Date(e.order.stateShow.isData.patient_account.date_of_birth)).getFullYear()-1970)+", "+a(e.order.stateShow.isData.gender==="laki-laki"?"Male":"Female"),1)])]),t("div",re,[ce,t("h5",de,a(e.order.stateShow.isData.note),1)])])])]),t("section",null,[t("div",me,[_e,g(t("textarea",{name:"",id:"",class:"border-2 rounded-lg h-20 p-3 mt-4 outline-none border-gray-150 w-full text-xs font-poppins overflow-scroll no-scrollbar","onUpdate:modelValue":i[0]||(i[0]=s=>e.order.stateShow.isData.subjective=s),readonly:""},null,512),[[x,e.order.stateShow.isData.subjective]])]),t("div",he,[pe,g(t("textarea",{name:"",id:"",class:"border-2 rounded-lg h-20 p-3 mt-4 outline-none border-gray-150 w-full text-xs font-poppins overflow-scroll no-scrollbar","onUpdate:modelValue":i[1]||(i[1]=s=>e.order.stateShow.isData.objective=s),readonly:""},null,512),[[x,e.order.stateShow.isData.objective]])]),t("div",ue,[fe,t("div",we,[(c(!0),m(N,null,L(e.order.stateShow.isData.assesment,(s,d)=>(c(),m("div",{key:d},[t("p",ge,a(`${d+=1}. ${s.name}`),1)]))),128))])]),t("div",xe,[be,g(t("textarea",{name:"",id:"",class:"border-2 rounded-lg h-20 p-3 mt-4 outline-none border-gray-150 w-full text-xs font-poppins overflow-scroll no-scrollbar","onUpdate:modelValue":i[2]||(i[2]=s=>e.order.stateShow.isData.planing.planing=s),readonly:""},null,512),[[x,e.order.stateShow.isData.planing.planing]])]),t("div",ye,[Se,g(t("textarea",{name:"",id:"",class:"border-2 rounded-lg h-20 p-3 mt-4 outline-none border-gray-150 w-full text-xs font-poppins overflow-scroll no-scrollbar","onUpdate:modelValue":i[3]||(i[3]=s=>e.order.stateShow.isData.planing.non_medical_mentosa=s),readonly:""},null,512),[[x,e.order.stateShow.isData.planing.non_medical_mentosa]])]),t("div",ve,[De,g(t("textarea",{name:"",id:"",class:"border-2 rounded-lg h-20 p-3 mt-4 outline-none border-gray-150 w-full text-xs font-poppins overflow-scroll no-scrollbar","onUpdate:modelValue":i[4]||(i[4]=s=>e.order.stateShow.isData.planing.procedure=s),readonly:""},null,512),[[x,e.order.stateShow.isData.planing.procedure]])])]),t("section",null,[ke,t("div",Te,[je,t("span",Me,a(e.idrFormat(e.order.stateShow.isData.price.toString(),"Rp ")),1)]),Be,t("div",Ce,[Oe,t("span",Re,a(e.idrFormat(e.order.stateShow.isData.price.toString(),"Rp ")),1)])])])):f("",!0),t("div",Fe,[t("div",Ne,[t("div",Le,[!e.order.stateShow.isLoading&&e.order.stateShow.isStatus==="success"?(c(),P(y,{key:0,onClick:i[5]||(i[5]=s=>e.actionStatus(e.order.stateShow.isData.status)),class:lt("text-white w-full font-poppins outline-none font-medium text-sm py-3 px-10 rounded-lg text-center "+(e.order.stateShow.isData.status==="waiting_payment"||e.order.stateShow.isData.status==="reschedule_from_doctor"||e.order.stateShow.isData.status==="join_now"||e.order.stateShow.isData.status==="on_air"?"bg-primary-color":"bg-gray-550")),title:e.order.stateShow.isData.status==="waiting_payment"?"Pay Now":e.order.stateShow.isData.status==="waiting_meeting"?"Waiting Meeting":e.order.stateShow.isData.status==="reschedule_from_doctor"?"Reschedule By Doctor":e.order.stateShow.isData.status==="reschedule_from_patient"?"Reschedule By Patient":e.order.stateShow.isData.status==="waiting_doctor_join"?"Waiting Doctor Join":e.order.stateShow.isData.status==="missed_meeting"?"Missed Meeting":e.order.stateShow.isData.status==="on_air"?"Meet":e.order.stateShow.isData.status==="on_air"?"On Air":e.order.stateShow.isData.status==="done"?"Finish":e.order.stateShow.isData.status==="join_now"?"Start Meeting":"",loading:e.order.state.isLoadingRe},null,8,["class","title","loading"])):f("",!0)]),w(D,{to:"/",class:"w-full mb-3 mt-5"},{default:j(()=>[Pe]),_:1})])]),Ve,e.modalRe===!0&&e.order.stateShow.isData.status==="reschedule_from_doctor"?(c(),m("div",Ie,[t("div",Ue,[t("div",{class:"absolute z-40 bg-black opacity-20 inset-0",onClick:e.closeModalRe}),t("div",ze,[Ae,Ee,t("p",Je,a(e.getDateFormatBooking(e.order.stateShow.isData.date,e.order.stateShow.isData.estimate)),1),t("div",{class:"w-full flex justify-between items-center"},[t("button",{class:"font-poppins outline-none font-medium text-sm py-2 px-3 rounded-lg border border-gray-550 mt-3",onClick:e.slcValue},"Choose the time"),t("button",{class:"font-poppins text-white outline-none font-medium text-sm py-2 px-3 rounded-lg bg-primary-color",onClick:e.accept},"Yes, reschedule")])])])])):f("",!0),e.modalRe===!0?(c(),P(n,{key:2,openModal:e.openModal,"onUpdate:changeOpen":e.changeOpen,"onUpdate:changeSelect":e.changeSelect,type:"blank"},{bottomSheet:j(()=>[t("div",Ye,[t("div",qe,[We,w(k,{allDay:e.tele.state.allDay,"onUpdate:selectDate":e.tele.getTime},null,8,["allDay","onUpdate:selectDate"]),Qe,t("div",Ge,[e.tele.stateTime.isLoading?(c(),m("div",He,$e)):f("",!0),t("div",ts,[!e.tele.stateTime.isLoading&&e.tele.stateTime.isStatus==="success"?(c(),m("div",es,[(c(!0),m(N,null,L(e.tele.stateTime.isData,(s,d)=>(c(),m("div",{key:d},[t("div",{ref_for:!0,ref:"cardSelectTime",slcTime:d,class:"px-5 py-2 text-center border border-primary-color rounded-xl w-full card-select-time-item cursor-pointer outline-none transition-all duration-300 ease-in-out overflow-hidden"},[t("h4",{class:"font-poppins text-sm whitespace-nowrap",slcTime:d},a(s.time),9,os)],8,ss)]))),128))])):f("",!0)],512)]),w(y,{class:"font-poppins text-white outline-none text-base py-3 rounded-lg bg-primary-color mt-4 w-full text-center font-semibold",onClick:e.submitRe,title:"Submit",loading:e.order.state.isLoadingRe},null,8,["loading"])])])]),_:1},8,["openModal"])):f("",!0)])]),_:1})])}var ps=H(bt,[["render",as]]);export{ps as default};
